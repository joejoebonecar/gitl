<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>blackjack - /gitl/</title>
<style>
:root{--bg:#eef2ff;--fg:#000000;--post-bg:#f0e0d6;--post-highlight:#d6daf0;--border:#b7c5d9;--link:#34345c;--link-hover:#dd0000}
[data-theme="yotsuba"]{--bg:#f0e0d6;--fg:#800000;--post-bg:#f0e0d6;--post-highlight:#f0c0d6;--border:#d9bfb7;--link:#34345c;--link-hover:#dd0000}
[data-theme="yotsuba-b"]{--bg:#f0e0d6;--fg:#800000;--post-bg:#f0e0d6;--post-highlight:#d6bad0;--border:#d9bfb7;--link:#34345c;--link-hover:#dd0000}
[data-theme="tomorrow"]{--bg:#1d1f21;--fg:#c5c8c6;--post-bg:#282a2e;--post-highlight:#373b41;--border:#4d4d4d;--link:#81a2be;--link-hover:#cc6666}
[data-theme="photon"]{--bg:#ffffff;--fg:#333333;--post-bg:#f5f5f5;--post-highlight:#e9e9e9;--border:#cccccc;--link:#2b5797;--link-hover:#d00000}
[data-theme="futaba"]{--bg:#eef2ff;--fg:#000000;--post-bg:#f0e0d6;--post-highlight:#d6daf0;--border:#b7c5d9;--link:#34345c;--link-hover:#dd0000}
[data-theme="protanopia"]{--bg:#e8e8d0;--fg:#4a4a00;--post-bg:#f0f0e0;--post-highlight:#d0d0c0;--border:#b0b090;--link:#0066cc;--link-hover:#0088ee}
[data-theme="deuteranopia"]{--bg:#f0e8f0;--fg:#4a004a;--post-bg:#f5f0f5;--post-highlight:#e0d0e0;--border:#c0b0c0;--link:#0066cc;--link-hover:#cc6600}
[data-theme="tritanopia"]{--bg:#f0e8e8;--fg:#4a0000;--post-bg:#f5f0f0;--post-highlight:#ffc0c0;--border:#d0a0a0;--link:#cc0066;--link-hover:#ff0000}
[data-theme="achromatopsia"]{--bg:#ffffff;--fg:#000000;--post-bg:#f0f0f0;--post-highlight:#d0d0d0;--border:#808080;--link:#404040;--link-hover:#000000}
[data-theme="psychedelic"]{--bg:#ff00ff;--fg:#00ff00;--post-bg:#ff6ec7;--post-highlight:#00ffff;--border:#ffff00;--link:#7b68ee;--link-hover:#ff1493}
[data-theme="psychedelic-dark"]{--bg:#0a0014;--fg:#ff00ff;--post-bg:#1a0033;--post-highlight:#2d004d;--border:#ff00ff;--link:#00ffff;--link-hover:#ff1493}
[data-theme="vaporwave"]{--bg:#1a1a2e;--fg:#ff71ce;--post-bg:#16213e;--post-highlight:#0f3460;--border:#ff71ce;--link:#01cdfe;--link-hover:#ff71ce}
[data-theme="matrix"]{--bg:#000000;--fg:#00ff00;--post-bg:#0a0a0a;--post-highlight:#001a00;--border:#003300;--link:#00cc00;--link-hover:#00ff00}
[data-theme="cyberpunk"]{--bg:#0d0d0d;--fg:#fcee0a;--post-bg:#1a1a1a;--post-highlight:#2a2a2a;--border:#ff2a6d;--link:#05d9e8;--link-hover:#ff2a6d}
[data-theme="sunset"]{--bg:#2c1810;--fg:#ffd4a3;--post-bg:#3d2318;--post-highlight:#5c3d2e;--border:#ff6b35;--link:#f7c59f;--link-hover:#ff9f1c}
[data-theme="ocean"]{--bg:#0a1628;--fg:#a8d8ea;--post-bg:#112240;--post-highlight:#1a365d;--border:#64b5f6;--link:#80deea;--link-hover:#4dd0e1}
[data-theme="forest"]{--bg:#1a2f1a;--fg:#c8e6c9;--post-bg:#2d4a2d;--post-highlight:#3d5c3d;--border:#66bb6a;--link:#a5d6a7;--link-hover:#81c784}
[data-theme="midnight"]{--bg:#0d1b2a;--fg:#e0e1dd;--post-bg:#1b263b;--post-highlight:#415a77;--border:#778da9;--link:#90caf9;--link-hover:#64b5f6}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: var(--bg);
  font-family: monospace;
  font-size: 13px;
  color: var(--fg);
  padding: 12px;
}

.container { max-width: 900px; margin: 0 auto; }

.header {
  background: var(--post-highlight);
  border: 1px solid var(--border);
  padding: 8px 12px;
  margin-bottom: 12px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.title {
  font-weight: bold;
  font-size: 16px;
}

.back-link {
  color: var(--link);
  text-decoration: none;
  font-size: 12px;
}

.back-link:hover { color: var(--link-hover); }

.game-container {
  background: var(--post-bg);
  border: 1px solid var(--border);
  padding: 12px;
}

.status {
  font-size: 14px;
  font-weight: bold;
  padding: 12px;
  background: var(--post-highlight);
  border: 1px solid var(--border);
  text-align: center;
  margin-bottom: 12px;
}

.table {
  background: #228b22;
  border: 2px solid #000;
  border-radius: 20px;
  padding: 20px;
  margin-bottom: 12px;
  min-height: 300px;
}

.hand {
  margin: 20px 0;
  padding: 12px;
  background: rgba(0,0,0,0.2);
  border-radius: 8px;
}

.hand-title {
  font-size: 12px;
  font-weight: bold;
  color: #fff;
  margin-bottom: 8px;
  text-transform: uppercase;
}

.cards {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  min-height: 60px;
  align-items: center;
}

.card {
  background: #fff;
  border: 2px solid #000;
  border-radius: 6px;
  padding: 8px 12px;
  font-size: 18px;
  font-weight: bold;
  min-width: 45px;
  text-align: center;
  box-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

.card.hidden {
  background: linear-gradient(45deg, #8b0000 25%, #b22222 25%, #b22222 50%, #8b0000 50%, #8b0000 75%, #b22222 75%, #b22222);
  background-size: 20px 20px;
  color: transparent;
}

.score {
  color: #ffd700;
  font-size: 14px;
  font-weight: bold;
  margin-top: 8px;
}

.controls {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-bottom: 12px;
}

button {
  flex: 1;
  min-width: 120px;
  background: var(--post-bg);
  border: 1px solid var(--border);
  color: var(--fg);
  padding: 12px;
  font-family: monospace;
  font-size: 12px;
  cursor: pointer;
  font-weight: bold;
}

button:hover:not(:disabled) {
  background: var(--post-highlight);
}

button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

button.primary {
  background: #ff6b6b;
  color: #fff;
  border-color: #c92a2a;
}

button.primary:hover:not(:disabled) {
  background: #c92a2a;
}

.info-panel {
  background: var(--post-highlight);
  border: 1px solid var(--border);
  padding: 12px;
  margin-bottom: 12px;
}

.info-panel h3 {
  font-size: 12px;
  margin-bottom: 8px;
  text-transform: uppercase;
  color: #666;
}

#aiTrashTalk {
  background: rgba(0,0,0,0.3);
  border: 1px solid #c92a2a;
  padding: 12px;
  min-height: 80px;
  line-height: 1.4;
  font-size: 12px;
  color: #fff;
}

.warning {
  background: #ff6b6b;
  border: 2px solid #c92a2a;
  padding: 12px;
  color: #fff;
  font-weight: bold;
  text-align: center;
  margin-bottom: 12px;
}

.disclaimer {
  background: var(--post-highlight);
  border: 1px solid var(--border);
  padding: 12px;
  margin-bottom: 12px;
  font-size: 11px;
  line-height: 1.6;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-10px); }
  75% { transform: translateX(10px); }
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.chaos-active {
  animation: shake 0.5s ease-in-out;
}

.spinning-card {
  animation: spin 1s linear infinite;
}

/* Mobile Responsive Design */
@media (max-width: 768px) {
  body {
    font-size: 14px;
    padding: 8px;
  }

  .container {
    max-width: 100%;
  }

  .header {
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
    padding: 12px;
  }

  .title {
    font-size: 14px;
    line-height: 1.4;
  }

  .back-link {
    font-size: 11px;
  }

  .game-container {
    padding: 8px;
  }

  .status {
    font-size: 13px;
    padding: 10px 8px;
  }

  .table {
    padding: 12px;
    min-height: 250px;
  }

  .hand {
    margin: 12px 0;
    padding: 10px;
  }

  .hand-title {
    font-size: 11px;
  }

  .cards {
    gap: 6px;
    min-height: 50px;
  }

  .card {
    padding: 6px 10px;
    font-size: 16px;
    min-width: 40px;
  }

  .score {
    font-size: 13px;
  }

  .controls {
    gap: 6px;
  }

  button {
    min-width: 100px;
    padding: 14px 10px;
    font-size: 11px;
    min-height: 44px; /* Touch-friendly */
  }

  .info-panel {
    padding: 10px;
    margin-bottom: 10px;
  }

  .info-panel h3 {
    font-size: 11px;
  }

  #aiTrashTalk {
    padding: 10px;
    min-height: 60px;
    font-size: 11px;
  }

  .warning {
    padding: 10px;
    font-size: 12px;
  }

  .disclaimer {
    padding: 10px;
    font-size: 10px;
    line-height: 1.5;
  }

  #modeSelector {
    padding: 16px !important;
  }

  #modeSelector h2 {
    font-size: 14px !important;
    margin-bottom: 12px !important;
  }

  #modeSelector button {
    padding: 14px !important;
    font-size: 12px !important;
    min-height: 50px;
  }

  /* Chaos controls grid - stack on mobile */
  #chaosControls .info-panel > div {
    grid-template-columns: 1fr !important;
    gap: 6px !important;
  }

  #chaosControls label {
    font-size: 11px;
  }
}

@media (max-width: 480px) {
  body {
    font-size: 13px;
    padding: 4px;
  }

  .header {
    padding: 8px;
  }

  .title {
    font-size: 12px;
  }

  .game-container {
    padding: 6px;
  }

  .status {
    font-size: 12px;
    padding: 8px 6px;
    margin-bottom: 8px;
  }

  .table {
    padding: 8px;
    border-radius: 12px;
    min-height: 200px;
  }

  .hand {
    margin: 10px 0;
    padding: 8px;
  }

  .hand-title {
    font-size: 10px;
    margin-bottom: 6px;
  }

  .cards {
    gap: 4px;
    min-height: 45px;
  }

  .card {
    padding: 5px 8px;
    font-size: 14px;
    min-width: 35px;
  }

  .score {
    font-size: 12px;
    margin-top: 6px;
  }

  .controls {
    gap: 4px;
    margin-bottom: 8px;
  }

  button {
    min-width: 80px;
    padding: 12px 8px;
    font-size: 10px;
    min-height: 44px;
  }

  .info-panel {
    padding: 8px;
    margin-bottom: 8px;
  }

  .info-panel h3 {
    font-size: 10px;
    margin-bottom: 6px;
  }

  #aiTrashTalk {
    padding: 8px;
    min-height: 50px;
    font-size: 10px;
  }

  .warning {
    padding: 8px;
    font-size: 11px;
  }

  .disclaimer {
    padding: 8px;
    font-size: 9px;
    margin-bottom: 8px;
  }

  #modeSelector {
    padding: 12px !important;
  }

  #modeSelector h2 {
    font-size: 12px !important;
    margin-bottom: 10px !important;
  }

  #modeSelector button {
    padding: 12px !important;
    font-size: 11px !important;
    margin: 6px 0 !important;
  }

  #chaosControls label {
    font-size: 10px;
  }

  #chaosControls input[type="checkbox"] {
    transform: scale(0.9);
  }
}

.themeDropdown{display:inline-block;position:relative}
.themeDropdown .dropdownContent{display:none;position:absolute;background:var(--post-bg);border:1px solid var(--border);min-width:180px;z-index:1000;font-size:11px;top:100%;right:0;margin-top:2px;max-height:400px;overflow-y:auto}
.themeDropdown:hover .dropdownContent{display:block}
.dropdownContent a{color:var(--fg);padding:6px 10px;text-decoration:none;display:block}
.dropdownContent a:hover{background:var(--post-highlight)}
.dropdownContent a.active{background:var(--post-highlight);font-weight:bold}
.theme-category{display:block;padding:6px 10px;font-size:9px;color:var(--fg);opacity:0.6;text-align:center;background:var(--post-highlight);border-bottom:1px solid var(--border)}
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <div class="title">üÉè BLACKJACK: THE HOUSE ALWAYS WINS (OR DOES IT?) üÉè</div>
    <div style="display:flex;gap:12px;align-items:center;">
      <span class="themeDropdown">
        <a href="#" onclick="return false;" class="back-link">Themes ‚ñº</a>
        <div class="dropdownContent">
          <span class="theme-category">‚îÄ‚îÄ Classic ‚îÄ‚îÄ</span>
          <a href="#" onclick="setTheme('yotsuba'); return false;" data-theme-option="yotsuba">Yotsuba</a>
          <a href="#" onclick="setTheme('yotsuba-b'); return false;" data-theme-option="yotsuba-b">Yotsuba B</a>
          <a href="#" onclick="setTheme('tomorrow'); return false;" data-theme-option="tomorrow">Tomorrow</a>
          <a href="#" onclick="setTheme('photon'); return false;" data-theme-option="photon">Photon</a>
          <a href="#" onclick="setTheme('futaba'); return false;" data-theme-option="futaba">Futaba</a>
          <span class="theme-category">‚îÄ‚îÄ Psychedelic ‚îÄ‚îÄ</span>
          <a href="#" onclick="setTheme('psychedelic'); return false;" data-theme-option="psychedelic">Psychedelic</a>
          <a href="#" onclick="setTheme('psychedelic-dark'); return false;" data-theme-option="psychedelic-dark">Psychedelic Dark</a>
          <a href="#" onclick="setTheme('vaporwave'); return false;" data-theme-option="vaporwave">Vaporwave</a>
          <a href="#" onclick="setTheme('matrix'); return false;" data-theme-option="matrix">Matrix</a>
          <a href="#" onclick="setTheme('cyberpunk'); return false;" data-theme-option="cyberpunk">Cyberpunk</a>
          <span class="theme-category">‚îÄ‚îÄ Nature ‚îÄ‚îÄ</span>
          <a href="#" onclick="setTheme('sunset'); return false;" data-theme-option="sunset">Sunset</a>
          <a href="#" onclick="setTheme('ocean'); return false;" data-theme-option="ocean">Ocean</a>
          <a href="#" onclick="setTheme('forest'); return false;" data-theme-option="forest">Forest</a>
          <a href="#" onclick="setTheme('midnight'); return false;" data-theme-option="midnight">Midnight</a>
          <span class="theme-category">‚îÄ‚îÄ Accessibility ‚îÄ‚îÄ</span>
          <a href="#" onclick="setTheme('protanopia'); return false;" data-theme-option="protanopia">Protanopia</a>
          <a href="#" onclick="setTheme('deuteranopia'); return false;" data-theme-option="deuteranopia">Deuteranopia</a>
          <a href="#" onclick="setTheme('tritanopia'); return false;" data-theme-option="tritanopia">Tritanopia</a>
          <a href="#" onclick="setTheme('achromatopsia'); return false;" data-theme-option="achromatopsia">Achromatopsia</a>
        </div>
      </span>
      <a href="../index.html" class="back-link">‚Üê back to /gitl/</a>
    </div>
  </div>

  <!-- Mode Selector -->
  <div id="modeSelector" style="background: #d6daf0; border: 2px solid #b7c5d9; padding: 20px; text-align: center;">
    <h2 style="margin-bottom: 16px;">CHOOSE YOUR DESTRUCTION</h2>
    <button onclick="startGame('ai')" class="primary" style="display: block; width: 100%; margin: 8px 0; padding: 12px; font-size: 14px;">
      ü§ñ VS ABUSIVE AI DEALER (RECOMMENDED)
    </button>
    <button onclick="startGame('human')" style="display: block; width: 100%; margin: 8px 0; padding: 12px; font-size: 14px;">
      üë• TWO PLAYER MODE (WEIRD)
    </button>
    <button onclick="startGame('chaos')" class="primary" style="display: block; width: 100%; margin: 8px 0; padding: 12px; font-size: 14px;">
      üî• CHAOS MODE (CARDS HAVE FREE WILL)
    </button>
  </div>

  <!-- 2-Player Disclaimer -->
  <div id="twoPlayerDisclaimer" class="disclaimer" style="display: none;">
    <h4 style="margin-bottom: 8px; color: #ff6b6b;">‚ö†Ô∏è TWO PLAYER WEB BLACKJACK DISCLAIMER ‚ö†Ô∏è</h4>
    <p>
      You're about to play a 2-player blackjack game on a single browser with no backend support.
      This means you'll be taking turns looking at the screen while the other person... what?
      Closes their eyes? Looks away? Makes airplane noises?
      <br><br>
      <b>What are you going to do?</b> Take turns on the same device?
      Jerk each other off to a shrine of Dr. Pepper cans while you wait for your turn?
      <br><br>
      This is objectively the most awkward way to play blackjack.
      But hey, you clicked it. That's on you. Have fun with your questionable life choices.
      <br><br>
      <i>- Management</i>
    </p>
  </div>

  <!-- Chaos Warning -->
  <div id="chaosWarning" class="warning" style="display: none; animation: pulse 2s infinite;">
    ‚ö†Ô∏è WARNING: CARDS HAVE ACHIEVED SENTIENCE ‚ö†Ô∏è<br>
    <span style="font-size: 11px;">deck physics are optional. math is a suggestion. your sanity is not guaranteed.</span>
  </div>

  <!-- Game Container -->
  <div id="gameContainer" class="game-container" style="display: none;">
    <div class="status" id="status">click new game to start</div>

    <!-- AI Trash Talk Panel -->
    <div id="aiPanel" class="info-panel" style="background: #ff6b6b; border-color: #c92a2a; color: #fff; display: none;">
      <h3 style="color: #fff;">ü§ñ DEALER TRASH TALK ü§ñ</h3>
      <div id="aiTrashTalk">Waiting for you to make terrible decisions...</div>
    </div>

    <!-- Game Table -->
    <div class="table" id="table">
      <div class="hand">
        <div class="hand-title" id="dealerLabel">Dealer</div>
        <div class="cards" id="dealerCards"></div>
        <div class="score" id="dealerScore">Score: ?</div>
      </div>

      <div class="hand">
        <div class="hand-title" id="playerLabel">Player</div>
        <div class="cards" id="playerCards"></div>
        <div class="score" id="playerScore">Score: 0</div>
      </div>
    </div>

    <!-- Controls -->
    <div class="controls">
      <button onclick="newGame()" class="primary">NEW GAME</button>
      <button onclick="hit()" id="hitBtn" disabled>HIT</button>
      <button onclick="stand()" id="standBtn" disabled>STAND</button>
      <button onclick="doubleDown()" id="doubleBtn" disabled>DOUBLE DOWN</button>
    </div>

    <!-- Chaos Controls -->
    <div id="chaosControls" style="display: none;">
      <div class="info-panel">
        <h3>üòà CHAOS TOGGLES üòà</h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 8px;">
          <label style="display: flex; align-items: center; gap: 4px;">
            <input type="checkbox" id="chaosShuffle" checked> Card Shuffle Mid-Game
          </label>
          <label style="display: flex; align-items: center; gap: 4px;">
            <input type="checkbox" id="chaosWrongValues" checked> Wrong Card Values
          </label>
          <label style="display: flex; align-items: center; gap: 4px;">
            <input type="checkbox" id="chaosDealerCheats" checked> Dealer Cheats
          </label>
          <label style="display: flex; align-items: center; gap: 4px;">
            <input type="checkbox" id="chaosScoreGlitch" checked> Score Glitches
          </label>
          <label style="display: flex; align-items: center; gap: 4px;">
            <input type="checkbox" id="chaosCardSwap" checked> Random Card Swaps
          </label>
          <label style="display: flex; align-items: center; gap: 4px;">
            <input type="checkbox" id="chaosGravity" checked> Card Gravity
          </label>
        </div>
      </div>
    </div>

    <div class="disclaimer">
      <h4>GAME MODES EXPLAINED:</h4>
      <b>AI Mode:</b> The dealer is an abusive AI that will mock your every move. Trash talk included. Your feelings will be hurt.<br><br>
      <b>2-Player Mode:</b> One person is the dealer, one is the player. Take turns. Try not to peek. This is stupid and you know it.<br><br>
      <b>Chaos Mode:</b> Cards shuffle mid-game. Values are lies. The dealer cheats. Scores glitch. Cards swap randomly. Gravity is optional. Nothing makes sense. This is blackjack on psychedelics.<br><br>
      <i>Remember: The house always wins. Except in chaos mode. Then nobody wins. Especially not your sanity.</i>
    </div>
  </div>
</div>

<script>
// Game state
let gameMode = null;
let deck = [];
let playerHand = [];
let dealerHand = [];
let gameActive = false;
let canDoubleDown = false;
let currentPlayer = 'player'; // For 2-player mode
let chaosLevel = 0;
let moveCount = 0;

// Card suits and values
const suits = ['‚ô†', '‚ô•', '‚ô¶', '‚ô£'];
const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];

// AI Trash Talk
const AI_TRASH_TALK = {
  start: [
    "Let me show you how to lose money efficiently.",
    "I've dealt to thousands of losers. You'll fit right in.",
    "Ready to donate your chips to the house?",
    "Pro tip: The house always wins. Spoiler alert: I'm the house.",
    "I can already see the regret in your cursor movements."
  ],
  afterPlayerHit: [
    "Bold move. By bold I mean stupid.",
    "Did you seriously just hit on that? LMAO",
    "I've seen better decisions from a random number generator.",
    "That's one way to lose. Not the fastest, but creative.",
    "Are you trying to bust or does it just come naturally?",
    "Interesting strategy: the 'lose immediately' approach.",
    "Every card you take brings you closer to poverty.",
    "Hit again. I dare you. I DOUBLE dare you."
  ],
  afterPlayerStand: [
    "Coward. But also smart. Mostly coward though.",
    "Standing on that? Okay, your funeral.",
    "Bold of you to assume that's enough to beat me.",
    "Good luck with that score. You'll need it.",
    "Congratulations on giving up at the perfect moment to still lose.",
    "That's your final answer? Really? Okay..."
  ],
  playerBust: [
    "BUST! Thanks for playing, sucker.",
    "Went over 21? Shocking. Said no one.",
    "LOL get absolutely wrecked.",
    "You played yourself. Literally.",
    "That's what we call a 'skill issue'.",
    "House wins again. Yawn. Next victim please.",
    "Better luck never. You're bad at this."
  ],
  dealerWins: [
    "Dealer wins. Did you ever doubt it?",
    "Another W for the house. Another L for you.",
    "I'd say good game but was it though?",
    "This is what peak performance looks like.",
    "The house always wins baby. ALWAYS.",
    "Thanks for your donation to the casino fund.",
    "Come back when you learn to count cards. JK don't come back."
  ],
  playerWins: [
    "You... won? This is rigged. Must be lag.",
    "Congratulations on your fluke victory.",
    "Even a broken clock is right twice a day.",
    "Don't get used to it. This was a statistical anomaly.",
    "I let you win. I felt bad for you.",
    "Beginner's luck is the only luck you have.",
    "Enjoy your moment. It won't last."
  ],
  playerBlackjack: [
    "Blackjack? Must be nice having the RNG on your side.",
    "Of course you get blackjack. Of course.",
    "This game is rigged. For you. Somehow.",
    "I'm calling the gaming commission about this.",
    "That's lucky not skilled. Remember that."
  ],
  thinking: [
    "Calculating optimal ways to destroy you...",
    "Let me just hit on 16... kidding I'm not an idiot like you...",
    "Processing... you're still going to lose...",
    "Running win_condition.exe... yep still me...",
    "Analyzing... yep you're cooked."
  ]
};

const CHAOS_MESSAGES = [
  "cards decided to shuffle themselves",
  "that's not the card you drew but ok",
  "the deck unionized and demands better working conditions",
  "math.exe has stopped working",
  "21? more like 42. or 7. who knows anymore",
  "your cards identified as different cards",
  "gravity reversed. cards falling upward now",
  "the dealer is cheating. obviously.",
  "score calculation service is on strike",
  "cards are having an identity crisis",
  "the deck is sentient and uncooperative",
  "house rules: there are no rules",
  "physics is a suggestion",
  "that ace is actually a 7 disguised as an ace",
  "dealer has creative interpretation of card values"
];

function startGame(mode) {
  gameMode = mode;
  document.getElementById('modeSelector').style.display = 'none';
  document.getElementById('gameContainer').style.display = 'block';

  if (mode === 'ai') {
    document.getElementById('aiPanel').style.display = 'block';
    document.getElementById('twoPlayerDisclaimer').style.display = 'none';
    document.getElementById('chaosWarning').style.display = 'none';
    document.getElementById('chaosControls').style.display = 'none';
    showAITrashTalk('start');
  } else if (mode === 'human') {
    document.getElementById('aiPanel').style.display = 'none';
    document.getElementById('twoPlayerDisclaimer').style.display = 'block';
    document.getElementById('chaosWarning').style.display = 'none';
    document.getElementById('chaosControls').style.display = 'none';
  } else if (mode === 'chaos') {
    document.getElementById('aiPanel').style.display = 'none';
    document.getElementById('twoPlayerDisclaimer').style.display = 'none';
    document.getElementById('chaosWarning').style.display = 'block';
    document.getElementById('chaosControls').style.display = 'block';
  }

  updateLabels();
}

function updateLabels() {
  if (gameMode === 'human') {
    document.getElementById('dealerLabel').textContent = currentPlayer === 'dealer' ? 'Dealer (YOUR TURN)' : 'Dealer';
    document.getElementById('playerLabel').textContent = currentPlayer === 'player' ? 'Player (YOUR TURN)' : 'Player';
  } else {
    document.getElementById('dealerLabel').textContent = 'Dealer';
    document.getElementById('playerLabel').textContent = 'Player';
  }
}

function showAITrashTalk(category) {
  if (gameMode !== 'ai') return;
  const messages = AI_TRASH_TALK[category];
  if (!messages) return;
  const message = messages[Math.floor(Math.random() * messages.length)];
  document.getElementById('aiTrashTalk').textContent = message;
}

function showChaosMessage() {
  if (gameMode !== 'chaos') return;
  const msg = CHAOS_MESSAGES[Math.floor(Math.random() * CHAOS_MESSAGES.length)];
  const status = document.getElementById('status');
  const originalText = status.textContent;
  status.textContent = msg;
  status.style.background = '#ff6b6b';
  status.style.color = '#fff';
  setTimeout(() => {
    status.textContent = originalText;
    status.style.background = '#ffe';
    status.style.color = '#000';
  }, 2000);
}

function createDeck() {
  deck = [];
  for (let i = 0; i < (gameMode === 'chaos' ? 1 : 6); i++) {
    for (let suit of suits) {
      for (let value of values) {
        deck.push({ value, suit });
      }
    }
  }
  shuffleDeck();
}

function shuffleDeck() {
  for (let i = deck.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [deck[i], deck[j]] = [deck[j], deck[i]];
  }
}

function getCardValue(card) {
  if (card.value === 'A') return 11;
  if (['J', 'Q', 'K'].includes(card.value)) return 10;
  return parseInt(card.value);
}

function calculateScore(hand) {
  let score = 0;
  let aces = 0;

  // CHAOS: Wrong score calculation
  if (gameMode === 'chaos' && document.getElementById('chaosScoreGlitch').checked && Math.random() < 0.3) {
    return Math.floor(Math.random() * 30) + 1;
  }

  for (let card of hand) {
    let value = getCardValue(card);

    // CHAOS: Wrong card values
    if (gameMode === 'chaos' && document.getElementById('chaosWrongValues').checked && Math.random() < 0.2) {
      value = Math.floor(Math.random() * 11) + 1;
    }

    if (card.value === 'A') {
      aces++;
      score += 11;
    } else {
      score += value;
    }
  }

  while (score > 21 && aces > 0) {
    score -= 10;
    aces--;
  }

  return score;
}

function displayCards(hand, elementId, hideFirst = false) {
  const element = document.getElementById(elementId);
  element.innerHTML = '';

  hand.forEach((card, index) => {
    const cardDiv = document.createElement('div');
    cardDiv.className = 'card';

    if (hideFirst && index === 0) {
      cardDiv.classList.add('hidden');
      cardDiv.textContent = '???';
    } else {
      // CHAOS: Cards display wrong values
      if (gameMode === 'chaos' && document.getElementById('chaosWrongValues').checked && Math.random() < 0.15) {
        const fakeValue = values[Math.floor(Math.random() * values.length)];
        const fakeSuit = suits[Math.floor(Math.random() * suits.length)];
        cardDiv.textContent = fakeValue + fakeSuit;
      } else {
        cardDiv.textContent = card.value + card.suit;
      }

      // CHAOS: Spinning cards
      if (gameMode === 'chaos' && Math.random() < 0.1) {
        cardDiv.classList.add('spinning-card');
      }
    }

    element.appendChild(cardDiv);
  });
}

function updateScores(revealDealer = false) {
  const playerScore = calculateScore(playerHand);
  document.getElementById('playerScore').textContent = `Score: ${playerScore}`;

  if (revealDealer) {
    const dealerScore = calculateScore(dealerHand);
    document.getElementById('dealerScore').textContent = `Score: ${dealerScore}`;
  } else {
    document.getElementById('dealerScore').textContent = 'Score: ?';
  }
}

function updateStatus(message) {
  document.getElementById('status').textContent = message;
}

function dealCard(hand) {
  if (deck.length === 0) {
    if (gameMode === 'chaos') {
      showChaosMessage();
    }
    createDeck();
  }
  const card = deck.pop();
  hand.push(card);

  // CHAOS: Card shuffle mid-game
  if (gameMode === 'chaos' && document.getElementById('chaosShuffle').checked && Math.random() < 0.15) {
    shuffleDeck();
    showChaosMessage();
  }

  return card;
}

function hasBlackjack(hand) {
  return hand.length === 2 && calculateScore(hand) === 21;
}

function newGame() {
  createDeck();
  playerHand = [];
  dealerHand = [];
  gameActive = true;
  canDoubleDown = true;
  moveCount = 0;
  chaosLevel = 0;
  currentPlayer = 'player';

  dealCard(playerHand);
  dealCard(dealerHand);
  dealCard(playerHand);
  dealCard(dealerHand);

  displayCards(dealerHand, 'dealerCards', true);
  displayCards(playerHand, 'playerCards');
  updateScores(false);

  if (hasBlackjack(playerHand)) {
    if (hasBlackjack(dealerHand)) {
      endGame('push! both have blackjack');
    } else {
      if (gameMode === 'ai') showAITrashTalk('playerBlackjack');
      endGame('BLACKJACK! you win!');
    }
    return;
  }

  updateStatus(gameMode === 'human' ? 'player\'s turn - hit or stand?' : 'your turn - hit or stand?');
  enableButtons(true);
  updateLabels();
}

function hit() {
  if (!gameActive) return;

  moveCount++;
  canDoubleDown = false;
  document.getElementById('doubleBtn').disabled = true;

  if (gameMode === 'ai') {
    showAITrashTalk('afterPlayerHit');
  }

  dealCard(playerHand);

  // CHAOS: Card swap
  if (gameMode === 'chaos' && document.getElementById('chaosCardSwap').checked && Math.random() < 0.2 && playerHand.length > 2) {
    const idx1 = Math.floor(Math.random() * playerHand.length);
    const idx2 = Math.floor(Math.random() * playerHand.length);
    [playerHand[idx1], playerHand[idx2]] = [playerHand[idx2], playerHand[idx1]];
    showChaosMessage();
  }

  displayCards(playerHand, 'playerCards');
  updateScores(false);

  const playerScore = calculateScore(playerHand);
  if (playerScore > 21) {
    if (gameMode === 'ai') showAITrashTalk('playerBust');
    endGame('BUST! dealer wins');
  } else if (playerScore === 21) {
    stand();
  }
}

function stand() {
  if (!gameActive) return;

  if (gameMode === 'ai') {
    showAITrashTalk('afterPlayerStand');
  }

  enableButtons(false);

  if (gameMode === 'human') {
    // In 2-player mode, switch to dealer
    currentPlayer = 'dealer';
    updateLabels();
    updateStatus('dealer\'s turn - hit or stand?');
    enableButtons(true);
    document.getElementById('doubleBtn').disabled = true;
    displayCards(dealerHand, 'dealerCards', false);
    updateScores(true);
    return;
  }

  updateStatus('dealer\'s turn...');
  displayCards(dealerHand, 'dealerCards', false);
  updateScores(true);

  if (gameMode === 'ai') {
    showAITrashTalk('thinking');
  }

  setTimeout(dealerPlay, 1000);
}

function dealerPlay() {
  let dealerScore = calculateScore(dealerHand);

  // CHAOS: Dealer cheats
  if (gameMode === 'chaos' && document.getElementById('chaosDealerCheats').checked && Math.random() < 0.3) {
    const playerScore = calculateScore(playerHand);
    if (dealerScore < playerScore && dealerScore < 21) {
      dealCard(dealerHand);
      displayCards(dealerHand, 'dealerCards', false);
      updateScores(true);
      showChaosMessage();
      setTimeout(dealerPlay, 800);
      return;
    }
  }

  if (dealerScore < 17) {
    dealCard(dealerHand);
    displayCards(dealerHand, 'dealerCards', false);
    updateScores(true);
    setTimeout(dealerPlay, 800);
  } else {
    determineWinner();
  }
}

function doubleDown() {
  if (!gameActive || !canDoubleDown) return;

  dealCard(playerHand);
  displayCards(playerHand, 'playerCards');
  updateScores(false);

  const playerScore = calculateScore(playerHand);
  if (playerScore > 21) {
    if (gameMode === 'ai') showAITrashTalk('playerBust');
    endGame('BUST! dealer wins');
  } else {
    stand();
  }
}

function determineWinner() {
  const playerScore = calculateScore(playerHand);
  const dealerScore = calculateScore(dealerHand);

  if (dealerScore > 21) {
    if (gameMode === 'ai') showAITrashTalk('playerWins');
    endGame('dealer busts! you win!');
  } else if (playerScore > dealerScore) {
    if (gameMode === 'ai') showAITrashTalk('playerWins');
    endGame('you win!');
  } else if (dealerScore > playerScore) {
    if (gameMode === 'ai') showAITrashTalk('dealerWins');
    endGame('dealer wins');
  } else {
    endGame('push! it\'s a tie');
  }
}

function endGame(message) {
  gameActive = false;
  updateStatus(message);
  displayCards(dealerHand, 'dealerCards', false);
  updateScores(true);
  enableButtons(false);
}

function enableButtons(enable) {
  document.getElementById('hitBtn').disabled = !enable;
  document.getElementById('standBtn').disabled = !enable;
  document.getElementById('doubleBtn').disabled = !enable || !canDoubleDown;
}

// CHAOS: Random events
setInterval(() => {
  if (gameMode === 'chaos' && gameActive) {
    // Card gravity - cards fall off table
    if (document.getElementById('chaosGravity').checked && Math.random() < 0.05 && playerHand.length > 2) {
      playerHand.pop();
      displayCards(playerHand, 'playerCards');
      updateScores(false);
      showChaosMessage();
    }

    // Table shake
    if (Math.random() < 0.1) {
      document.getElementById('table').classList.add('chaos-active');
      setTimeout(() => {
        document.getElementById('table').classList.remove('chaos-active');
      }, 500);
    }
  }
}, 3000);

console.log('blackjack.exe loaded - house always wins (probably)');
</script>
<script>
function setTheme(themeName) {
  document.documentElement.setAttribute('data-theme', themeName);
  localStorage.setItem('gitl-theme', themeName);
  document.querySelectorAll('.dropdownContent a').forEach(link => {
    if (link.getAttribute('data-theme-option') === themeName) {
      link.classList.add('active');
    } else {
      link.classList.remove('active');
    }
  });
}
document.addEventListener('DOMContentLoaded', function() {
  const savedTheme = localStorage.getItem('gitl-theme');
  if (savedTheme) {
    setTheme(savedTheme);
  }
});
</script>
<script data-goatcounter="https://guyintheloop.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>

</body>
</html>
